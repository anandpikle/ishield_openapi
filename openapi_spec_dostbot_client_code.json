{"openapi":"3.0.0","info":{"title":"ishield.ai Conversational API specifications","version":"0.1.0","description":"Conversational content analysis API for ishield.ai","contact":{"name":"ishield.ai","url":"https://ishield.ai","email":"info@ishield.ai"}},"servers":[{"url":"http://localhost:3000"}],"paths":{"/api/analyzeMessage":{"post":{"description":"Analyze message posted on a team or one-on-one/ group chat, on which Dost is installed.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"tenantId":{"type":"string","description":"Workspace identifier of the organization","example":"zxyorg.slack.com"},"teamId":{"type":"string","description":"Team or channel identifier of the organization","example":"testteam_20220219_03"},"registryUserId":{"type":"string","description":"User's unique identifier in the organization","example":"usr09871"},"email":{"type":"string","description":"User's email for communication (optional)","example":"jennygraham@myorg.com"},"conversationType":{"type":"string","description":"Type of conversation (channel/ personal/ group)","example":"channel"},"messageText":{"type":"string","description":"Message text that was or is to be posted","example":"This is a regular message"},"files":{"type":"array","description":"Images/videos sent as message attachments","items":{"type":"object","properties":{"contentUrl":{"type":"string","description":"Url to extract the attachment","example":"https://xyzorg.com/media/abc123.png"},"authToken":{"type":"string","description":"Authentication token (if required) to extract the attachment","example":"juy_shq16$8998"}}}}}}}}},"responses":{"200":{"description":"Results based on analysis of the message","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","description":"API outcome","example":"success"},"textIssues":{"type":"array","description":"issues identified in message text","items":{"type":"object","properties":{"contextualIssues":{"type":"array","description":"Contextual issues such as microaggression, stereotypes"},"keywordDetectionIssues":{"type":"array","description":"Keyword related issues"}}}}}}}}},"500":{"description":"SERVER ERROR"}},"x-codeSamples":[{"lang":"Python + Python3","source":"import http.client\n\nconn = http.client.HTTPConnection(\"localhost:3000\")\n\npayload = \"{\\\"tenantId\\\":\\\"zxyorg.slack.com\\\",\\\"teamId\\\":\\\"testteam_20220219_03\\\",\\\"registryUserId\\\":\\\"usr09871\\\",\\\"email\\\":\\\"jennygraham@myorg.com\\\",\\\"conversationType\\\":\\\"channel\\\",\\\"messageText\\\":\\\"This is a regular message\\\",\\\"files\\\":[{\\\"contentUrl\\\":\\\"https://xyzorg.com/media/abc123.png\\\",\\\"authToken\\\":\\\"juy_shq16$8998\\\"}]}\"\n\nheaders = { 'content-type': \"application/json\" }\n\nconn.request(\"POST\", \"/api/analyzeMessage\", payload, headers)\n\nres = conn.getresponse()\ndata = res.read()\n\nprint(data.decode(\"utf-8\"))"},{"lang":"Node + Request","source":"const request = require('request');\n\nconst options = {\n  method: 'POST',\n  url: 'http://localhost:3000/api/analyzeMessage',\n  headers: {'content-type': 'application/json'},\n  body: {\n    tenantId: 'zxyorg.slack.com',\n    teamId: 'testteam_20220219_03',\n    registryUserId: 'usr09871',\n    email: 'jennygraham@myorg.com',\n    conversationType: 'channel',\n    messageText: 'This is a regular message',\n    files: [\n      {contentUrl: 'https://xyzorg.com/media/abc123.png', authToken: 'juy_shq16$8998'}\n    ]\n  },\n  json: true\n};\n\nrequest(options, function (error, response, body) {\n  if (error) throw new Error(error);\n\n  console.log(body);\n});\n"},{"lang":"Shell + Curl","source":"curl --request POST \\\n  --url http://localhost:3000/api/analyzeMessage \\\n  --header 'content-type: application/json' \\\n  --data '{\"tenantId\":\"zxyorg.slack.com\",\"teamId\":\"testteam_20220219_03\",\"registryUserId\":\"usr09871\",\"email\":\"jennygraham@myorg.com\",\"conversationType\":\"channel\",\"messageText\":\"This is a regular message\",\"files\":[{\"contentUrl\":\"https://xyzorg.com/media/abc123.png\",\"authToken\":\"juy_shq16$8998\"}]}'"}]}}},"components":{},"tags":[]}
